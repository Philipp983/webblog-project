<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <title>Zwitscher</title>
</head>
<body>

<header>
    <nav>
        <th:block th:if="${sessionUser == null}">
            <a th:href="@{/login}">Login</a>
            <a th:href="@{/register}">Sign up</a>
        </th:block>

        <form th:if="${sessionUser != null}" method="post" th:action="@{/logout}">
            <button type="submit">Logout</button>
        </form>
    </nav>
    <hr>
    <form th:if="${sessionUser != null}" method="post" th:action="@{/deleteAccount}">
        <button type="submit">Delete Your Account</button>
    </form>
    <!-- Admin Panel to delete other users -->
    <div th:if="${sessionUser != null and sessionUser.admin}">
        <h2>Admin Panel</h2>
        <form method="post" th:action="@{/deleteUserByUsername}">
            <label for="userToDelete">Username to delete:</label>
            <input type="text" id="userToDelete" name="userToDelete" th:value="${userToDelete}" placeholder="Enter username...">
            <button type="submit">Delete User By Username</button>
        </form>
    </div>

    <!-- Admin Panel to promote a user to admin -->
    <div th:if="${sessionUser != null and sessionUser.admin}">
<!--        <h2>Admin Panel</h2>-->
        <form method="post" th:action="@{/promoteUserByUsernameToAdmin}">
            <label for="promoteUser">Username to promote:</label>
            <input type="text" id="promoteUser" name="promoteUser" th:value="${promoteUser}" placeholder="Enter username...">
            <button type="submit">Promote User By Username to Admin</button>
        </form>
    </div>
    <!-- Admin Panel to demote a user to admin -->
    <div th:if="${sessionUser != null and sessionUser.admin}">
        <!--        <h2>Admin Panel</h2>-->
        <form method="post" th:action="@{/demoteUserByUsernameToAdmin}">
            <label for="demoteUser">Username to promote:</label>
            <input type="text" id="demoteUser" name="demoteUser" th:value="${demoteUser}" placeholder="Enter username...">
            <button type="submit">Demote Admin By Username to Blogger</button>
        </form>
    </div>
</header>
<h1 th:text="${sessionUser.username}"></h1>

<a th:href="@{/}">Home</a>

<form th:if="${sessionUser != null}" method="post" enctype="multipart/form-data" th:action="@{/uploadProfilePicture}">
    <input type="file" name="profilePicture" accept="image/png, image/jpeg">
    <button type="submit">Upload</button>
</form>


<hr>


<!--<div th:each="message: ${user.messages}">-->
<!--    <strong th:text="${#dates.format(message.postedAt)}"></strong>-->
<!--    <span th:text="${message.text}"></span>-->
<!--<div>-->
<!--    <form th:if="${user == sessionUser}" method="post" th:action="@{/messageDelete(messageId=${message.id})}">-->
<!--        <button type="submit">Delete</button>-->
<!--    </form>-->
<!--</div>-->
</body>

</html>

